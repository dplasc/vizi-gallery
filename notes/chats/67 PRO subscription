Evo **STRUCTURED SUMMARY / HANDOFF** za ovaj chat, Äisto i spremno za nastavak ğŸ‘‡

---

## 1. **Chat broj**

**#67**

---

## 2. **Naslov chata (tehniÄki precizan)**

**PRO subscription source-of-truth fix + onboarding stabilization + dashboard UX alignment**

---

## 3. **Faza projekta**

**FAZA 65 â†’ zavrÅ¡etak (Auth, Onboarding, Subscription & Dashboard UX)**

---

## 4. **Å to smo konkretno napravili / zakljuÄili**

* Popravljen **onboarding bug** gdje se profil nije kreirao nakon odabira usernamea
  â†’ implementiran `UPSERT` + verifikacija prije redirecta
* Stabiliziran **OTP login + onboarding flow** (novi korisnici viÅ¡e ne zapinju)
* UtvrÄ‘eno da je **`vizi_subscriptions` jedini source-of-truth** za PRO/FREE
* Otkriven i ispravljen **pogreÅ¡an PRO owner_id** (bio vezan na krivi profil)
* OÄiÅ¡Ä‡eno stanje u bazi:

  * toÄno **1 aktivan PRO** (dplasc / auth UID)
  * nema viÅ¡e cross-account mijeÅ¡anja
* Implementiran **server-side `isPro()` helper**

  * koristi iskljuÄivo `vizi_subscriptions`
  * `owner_id === auth.users.id`
* UsklaÄ‘en UI:

  * PRO korisnik **nigdje ne vidi** â€œNadogradi na PROâ€
  * FREE korisnik **svugdje vidi** upgrade CTA
* Dodan UX improvement:

  * **â€œPogledaj moj profilâ€** gumb u **dashboard headeru**
  * vodi na `/{username}`
  * prikazuje se samo ako username postoji
* Sve promjene:

  * commitane
  * pushane
  * deployane na produkciju
  * ruÄno potvrÄ‘ene da rade

---

## 5. **Å to je IZRIÄŒITO odluÄeno / zakljuÄano**

* **Subscription model (ZA SADA):**

  * 1 user = 1 subscription
  * `vizi_subscriptions.owner_id = auth.users.id`
* **NEMA multi-tenant / account modela** u ovoj fazi
* PRO/FREE se **nikad viÅ¡e ne Äita iz `profiles`**
* `lib/auth/check-pro.ts` je **jedini autoritet** za PRO status
* Nema fallbacka, nema guessinga

---

## 6. **Otvorene stavke**

* UI prikaz:

  * â€œPRO aktivan od / doâ€ (datumi pretplate)
* Daljnje zakljuÄavanje featurea:

  * toÄno definirati Å¡to je FREE, Å¡to PRO
* Super-admin ideje (header oglasi, pozicije, linkovi)
  *(svjesno odgoÄ‘eno, nije scope ovog chata)*

---

## 7. **SljedeÄ‡i dogovoreni korak (samo jedan)**

ğŸ‘‰ **Odabrati i implementirati JEDNO od sljedeÄ‡eg:**

* prikaz **PRO perioda (start / end)** u dashboardu
  **ILI**
* definiranje i tehniÄko zakljuÄavanje **FREE vs PRO feature seta**

*(korak biraÅ¡ ti u novom chatu)*

---

## 8. **Napomena za nastavak u novom chatu**

* Projekt je sada u **stabilnom stanju**
* Auth, onboarding i subscription pipeline su **Äisti**
* Novi chat moÅ¾e krenuti **bez ikakvog duga**
* Preporuka: zapoÄeti s jasnom **FREE/PRO specifikacijom** ili **PRO status UX-om**

---

Kad Å¾eliÅ¡, samo otvori novi chat i napiÅ¡i npr.:
ğŸ‘‰ *â€œNastavljamo â€“ Å¾elim prikaz PRO periodaâ€*
ili
ğŸ‘‰ *â€œIdemo definirati FREE vs PRO feature setâ€*
