Evo **STRUCTURED SUMMARY / HANDOFF** za ovaj chat, **u točno traženom formatu**, bez novih ideja i bez scope creepa.

---

## 1. Chat broj

**Chat #14**

## 2. Naslov chata

**Vizi.hr — FAZA 11 & 12: Username edit + Public profile fetch fix (Server Components)**

## 3. Faza projekta

* **FAZA 11 — Username / public identity edit**
* **FAZA 12 — Production deploy & verification**

## 4. Što smo konkretno napravili / zaključili

* Omogućena izmjena **username-a** za prijavljenog korisnika na `/profile/edit`
* Implementirana validacija username-a (regex, duljina, lowercase)
* Implementirana **unique provjera** username-a u bazi
* Username i full_name se spremaju **u jednoj Server Action**
* Public profile API potvrđeno vraća ispravne podatke po username-u
* Detektiran i riješen bug gdje public profile page puca u produkciji
* Public profile page (`/[username]`) učinjen **robustnim na missing fields**
* Uklonjen `BASE_URL` pattern
* Implementiran **apsolutni fetch URL** u Server Componentu koristeći `next/headers`
* Riješeni problemi s lokalnim dev serverom (port, lock, multiple node procesi)
* Uspješno commitano i pushano rješenje za public profile fetch

## 5. Što je IZRIČITO odlučeno / zaključano

* Username je **dio `profiles` tablice** i jedinstven je
* Public profil se dohvaća **isključivo po username-u**
* Server Components **ne koriste relativni fetch** za API
* Fetch u Server Componentima se gradi iz **request headera (origin)**
* Public profile page **ne smije pucati** ako neki optional field nedostaje
* Cursor embedded browser se **ne koristi kao izvor istine** (Chrome je referenca)

## 6. Otvorene stavke

* Nema otvorenih stavki vezanih uz FAZU 11 i FAZU 12

## 7. Sljedeći dogovoreni korak (samo jedan)

* **FAZA 13 — Profile content (bio, headline ili osnovni public fields)**

## 8. Napomena za nastavak u novom chatu

FAZE 11 i 12 su stabilne i zatvorene. U novom chatu se može sigurno nastaviti s proširenjem public profila bez diranja auth, username ili fetch logike.

---

Ako želiš, u sljedećem chatu mogu:

* predložiti **točan redoslijed FAZE 13**, ili
* krenuti odmah s **prvim malim, sigurnim korakom** (1 field, 1 migracija).
